(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{9026:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Components/Admin",function(){return t(1752)}])},3916:function(e,n,t){"use strict";t.d(n,{Ap:function(){return d},I8:function(){return u},db:function(){return c},tO:function(){return l}});var i=t(5503),o=t(7702),a=t(6257),r=t(1153),s=(0,i.ZF)({apiKey:"AIzaSyApB5RnE1ZVuqn4aSaBzBJqcKMazgu7Fak",authDomain:"xktransfer-30d93.firebaseapp.com",projectId:"xktransfer-30d93",storageBucket:"xktransfer-30d93.appspot.com",messagingSenderId:"446072266748",appId:"1:446072266748:web:02199dec16fee9a67f9c79"}),l=(0,r.cF)(s),c=(0,a.ad)(s),u=(0,o.v0)(s),d=new o.hJ},1752:function(e,n,t){"use strict";t.r(n);var i=t(7568),o=t(4924),a=t(9815),r=t(4051),s=t.n(r),l=t(5893),c=t(7294),u=t(214),d=t.n(u),m=t(4468),_=t.n(m),f=t(8595),p=t.n(f),h=t(1153),g=t(3916),x=t(6257),N=t(5675),b=t.n(N);n.default=function(){var e=(0,c.useState)([]),n=e[0],t=e[1],r=(0,c.useState)([]),u=r[0],m=r[1],f=(0,c.useState)(null),N=f[0],v=f[1],S=(0,c.useState)(""),j=S[0],I=S[1];(0,c.useEffect)((function(){function e(){return(e=(0,i.Z)(s().mark((function e(){var i,o,r,l,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,x.JU)(g.db,"admin","clientList"),e.next=3,(0,x.QT)(i);case 3:if(!(o=e.sent).exists()){e.next=23;break}0==n.length&&Object.keys(o.data()).map((function(e){return t((function(n){return(0,a.Z)(n).concat([e])}))})),r=[],Object.values(o.data()).map((function(e){return r.push(e)})),l=0;case 9:if(!(l<r.length)){e.next=20;break}return c=[],u=r[l].uidWithoutNumberAtTheStart,e.next=14,(0,x.PL)((0,x.hJ)(g.db,u));case 14:e.sent.forEach((function(e){"settings"!==e.id&&c.push(e.data())})),r[l].songs=c;case 17:l++,e.next=9;break;case 20:m(r),e.next=24;break;case 23:console.log("No such document!");case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var C=(0,c.useState)(null),w=C[0],y=C[1],A=(0,c.useState)(null),B=(A[0],A[1],function(){var e=(0,i.Z)(s().mark((function e(n){var t,i,a,r,l,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),console.log(n.target[0].files[0].name),null!=w){e.next=4;break}return e.abrupt("return");case 4:return t=n.target[0].files[0].name.replace(/.wav|.mp3|.jpg|.jpeg/,""),i="",a=n.target[1].value,r=(0,h.iH)(g.tO,"masters/".concat(w.name)),l=(0,x.JU)(g.db,N.uidWithoutNumberAtTheStart,a),e.next=11,(0,x.QT)(l);case 11:return c=e.sent,e.next=14,(0,h.KV)(r,w).then((function(e){(0,h.Jt)(e.ref).then((function(e){i=e,c.exists(),(0,x.pl)(l,(0,o.Z)({},t,{downloadURL:i,fileNameRegexed:t,songName:a,date:new Date,revisionNote:"",fileNameRaw:n.target[0].files[0].name}))}))}));case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),k=function(){var e=(0,i.Z)(s().mark((function e(n,t,i){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?(o=(0,h.iH)(g.tO,"masters/"+n),(0,h.oq)(o).then((function(){(0,x.oe)((0,x.JU)(g.db,i.uidWithoutNumberAtTheStart,t)),console.log("file deleted!")})).catch((function(e){console.log(e)}))):console.log("file didnt exist apparently");case 1:case"end":return e.stop()}}),e)})));return function(n,t,i){return e.apply(this,arguments)}}();return(0,l.jsxs)("div",{className:_().admin,children:[(0,l.jsxs)("form",{className:_().adminForm,onSubmit:B,children:[(0,l.jsxs)("div",{className:_().selectFileContainer,children:[(0,l.jsx)("label",{htmlFor:"fileSelectionButton",className:_().adminFormButton,children:"Select File"}),(0,l.jsx)("input",{id:"fileSelectionButton",type:"file",style:{display:"none"},onChange:function(e){!function(e){y(e.target.files[0])}(e)}}),(0,l.jsx)("p",{className:_().fileSelectedName,children:w?w.name:""})]}),(0,l.jsx)("input",{type:"text",defaultValue:j}),(0,l.jsx)("select",{children:n.map((function(e){return(0,l.jsx)("option",{children:e},e)}))}),(0,l.jsx)("button",{type:"submit",className:_().adminFormButtonUpload,children:"upload file"})]}),(0,l.jsx)("ul",{className:d().list,children:u&&u.map((function(e){return(0,l.jsxs)("ul",{className:_().client,onClick:function(){return v(e)},children:[(0,l.jsxs)("li",{className:_().clientInfoCard,children:[(0,l.jsx)(b(),{src:e.photoURL,alt:"User Photo",width:"100%",height:"100%",style:{overflow:"hidden",borderRadius:"50%",borderStyle:"solid",borderWidth:"2px",borderColor:"rgb(255, 255, 255)"}},e.uid),(0,l.jsxs)("section",{className:_().clientInfo,children:[e.displayName,(0,l.jsx)("br",{}),(0,l.jsx)("p",{className:_().clientInfoCardEmail,children:e.uid}),(0,l.jsx)("p",{className:_().clientInfoCardEmail,children:e.email})]})]}),(0,l.jsx)("ul",{className:p().songList,children:e.songs.map((function(n,t){return(0,l.jsx)("ul",{className:p().fileListItem,children:Object.keys(n).map((function(t,i){return(0,l.jsxs)("ul",{className:p().fileVersion,onClick:function(){return I(n[t].songName)},children:[(0,l.jsxs)("li",{className:p().songName,children:[n[t].songName," ",(0,l.jsx)("button",{onClick:function(){return k(n[t].fileNameRaw,n[t].songName,e)},className:p().songDeleteButton,children:"delete"})," "]}),(0,l.jsx)("li",{className:p().filename,children:n[t].fileNameRaw}),(0,l.jsx)("br",{}),(0,l.jsx)("li",{className:p().revisionNote,children:n[t].revisionNote}),(0,l.jsx)("br",{}),(0,l.jsx)("li",{children:(0,l.jsx)("audio",{className:d().audio,controls:!0,src:n[t].downloadURL},n[t].getDownloadURL)})]},i)}))},e.uid+t)}))})]},e.uid)}))})]})}},4468:function(e){e.exports={admin:"Admin_admin__1yrRd",adminForm:"Admin_adminForm__0G9rP",selectFileContainer:"Admin_selectFileContainer__QHPI2",fileSelectedName:"Admin_fileSelectedName__twSkg",adminFormButton:"Admin_adminFormButton__GwpXx",adminFormButtonUpload:"Admin_adminFormButtonUpload__ANdu7",client:"Admin_client__ZTAyt",clientClient:"Admin_clientClient__7oYpr",clientInfoCard:"Admin_clientInfoCard__FBtE_",clientInfo:"Admin_clientInfo__diFAc",clientInfoCardEmail:"Admin_clientInfoCardEmail__GoJkt",fakeTextHeader:"Admin_fakeTextHeader__u201G"}},214:function(e){e.exports={container:"Home_container__bCOhY",list:"Home_list__qBUOI",clientContainer:"Home_clientContainer__zaBFF",clientSongList:"Home_clientSongList__G0hZK",userIcon:"Home_userIcon__gSg8v",nav:"Home_nav__vYbrQ",footer:"Home_footer____T7K",uploadButton:"Home_uploadButton__Dy1yQ",songListItem:"Home_songListItem__ViKIf",songListItemListItem:"Home_songListItemListItem__AQJ6b",audio:"Home_audio__yfbiH",revisionTextArea:"Home_revisionTextArea__Flcmw",indexButtonsContainer:"Home_indexButtonsContainer__ZNNAE",indexButtons:"Home_indexButtons__0WvI0"}},8595:function(e){e.exports={songList:"Song_songList__9pPCZ",fileListItem:"Song_fileListItem__ti8nt",fileVersion:"Song_fileVersion__qD8HY",fileVersionClient:"Song_fileVersionClient__gKO8c",songName:"Song_songName__uyKG4",revisionNote:"Song_revisionNote__J9Oie",filename:"Song_filename__3dQdr",songDeleteButton:"Song_songDeleteButton__eeika",songDeleteButtonClient:"Song_songDeleteButtonClient__j5_ch",audioWithSpace:"Song_audioWithSpace__m31_p",cleanButton:"Song_cleanButton__nvzUz"}},9815:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});var i=t(943);var o=t(3375);var a=t(1566);function r(e){return function(e){if(Array.isArray(e))return(0,i.Z)(e)}(e)||(0,o.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(e){e.O(0,[16,440,641,675,774,888,179],(function(){return n=9026,e(e.s=n);var n}));var n=e.O();_N_E=n}]);